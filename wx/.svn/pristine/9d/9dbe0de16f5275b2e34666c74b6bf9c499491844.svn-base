const app = getApp();
var height = 0,
  dcSHeight = 0,
  dcH = 0,
  siH = 0;
Page({

  /**
   * 页面的初始数据
   */
  data: {
    dcStore: [
      '和毅体育新城店',
      '和毅人民路店',
      '和毅滨江店',
      '和毅铜仁万山店',
      '和毅人民路店',
      '和毅滨江店',
      '和毅铜仁万山店',
      '和毅人民路店',
      '和毅滨江店',
      '和毅铜仁万山店',
      '和毅滨江店',
      '和毅铜仁万山店',
      '和毅滨江店',
      '和毅铜仁万山店'
    ],
    storeIdx: 0,
    showMask: false
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    var _this = this;
    if (wx.canIUse('createSelectorQuery')) {
      var query = wx.createSelectorQuery();
      query.select('.dc-title').boundingClientRect(function (res) {
        dcH = res.height;
      }).exec();

      query.select('.s-info').boundingClientRect(function (res) {
        siH = res.height;
      }).exec();

      setTimeout(function () {
        wx.getSystemInfo({
          success: function (res) {
            height = res.windowHeight - dcH;
            dcSHeight = res.windowHeight - dcH - siH;
            _this.setData({
              height: height,
              dcSHeight: dcSHeight
            });
          }
        });
      }, 1000);
    }
  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {
    
  },
  /**
   * 点击切换门店会员卡
   */
  changeStore: function (e) {
    this.setData({
      storeIdx: e.target.dataset.index
    });
  },
  /**
   * 点击查看办卡细则
   */
  rules: function () {
    this.setData({
      showMask: true
    });
  },
  /**
   * 关闭办卡细则
   */
  closeRules: function () {
    this.setData({
      showMask: false
    });
  }
});