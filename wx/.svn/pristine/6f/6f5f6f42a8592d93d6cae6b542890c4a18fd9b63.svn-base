var buyNum = 1;
Page({

  /**
   * 页面的初始数据
   */
  data: {
    banner: [
      'http://nwx.daqisoft.cn/uploads/j/jmprxe1453369563/2/3/b/6/thumb_59f7ee1141ddc.jpg',
      'http://nwx.daqisoft.cn/uploads/j/jmprxe1453369563/6/e/6/a/thumb_59f7f2ece5a36.jpg',
      'http://nwx.daqisoft.cn/uploads/j/jmprxe1453369563/4/5/1/a/thumb_59855f051519b.jpg',
      'https://iservice.daqisoft.cn/Public/Home/images/cbd.jpg'
    ]
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    this.setData({
      maskDisplay: 'none',
      nums: buyNum
    });
  },
  /**
   * 查看全部评论
   */
  lookAllAssess: function () {
    wx.navigateTo({
      url: '../all-assess/all-assess',
    });
  },
  /**
   * 点击加入购物车
   */
  pushCar: function () {
    buyShow.call(this);
  },
  /**
   * 点击立即购买
   */
  buys: function () {
    buyShow.call(this);
  },
  /**
   * 关闭购买数量
   */
  closeBuy: function () {
    buyHide.call(this);
  },
  /**
   * 购买数量减减
   */
  lessNum: function () {
    buyNum--;
    if (buyNum <= 1) {
      buyNum = 1;
    }
    this.setData({
      nums: buyNum
    });
  },
  /**
   * 购买数量加加
   */
  addNum: function () {
    buyNum++;
    this.setData({
      nums: buyNum
    });
  },
  /**
   * 图片预览
   */
  previewImg: function (e) {
    wx.previewImage({
      urls: e.currentTarget.dataset.urlarr,
      current: e.currentTarget.dataset.currentimg,
    });
  }
});
/**
 * 显示购买
 */
function buyShow() {
  this.setData({
    maskDisplay: 'block',
    buyAnimation: 'buy-num-in'
  });
}
/**
 * 隐藏购买
 */
function buyHide() {
  this.setData({
    maskDisplay: 'none',
    buyAnimation: 'buy-num-out'
  });
}