<view class="content">
  <view class="bill-box">
    <view class="bill-title">{{bsname}}</view>

    <view class="bill-stitle flex-wrp">
      <view class="room-no">房间号：{{BillingInfo[0].RoomName}}</view>
      <view class="con-bills">消费账单：{{BusinessNo}}</view>
    </view>

    <view class="column-name flex-wrp">
      <view class="pname">项目名称</view>
      <view class="work-no">工号</view>
      <view class="number">数量</view>
      <view class="amount">金额</view>
      <view class="need">需付</view>
    </view>

    <block wx:for="{{BillingInfo}}">
      <view class="bill-con flex-wrp">
        <view class="pname text-ellipsis">{{item.ServiceItemName}}</view>
        <view class="work-no text-ellipsis">{{!item.JSStaffWorkNo ? '' : item.JSStaffWorkNo }}</view>
        <view class="number text-ellipsis">{{item.ServiceNum}}</view>
        <view class="amount text-ellipsis">{{item.SinglePrice}}</view>
        <view class="need text-ellipsis">{{item.PaySinglePrice}}</view>
      </view>
    </block>

    <view class="tosum-up">
      <view class="offer">优惠：￥{{offer_amount}}</view>
      <view class="need-topay">需付：
        <text>￥{{need}}</text>
      </view>
    </view>

    <!-- 选择卡 -->
    <view class="switching" bindtap="switching" wx:if="{{checkoutCard}}">
      <image src="{{checkoutCard.PicUrl == '' ? cardPicUrl : checkoutCard.PicUrl}}"></image>
      <view class="current-cardtype">{{checkoutCard.MembershipTypeName}}</view>
      <text>余额：{{checkoutCard.Balance}}</text>
      <block wx:if="{{checkoutCard.AuthMoney > 0}}">
        <text style="margin-left:15rpx;">授信额：{{checkoutCard.AuthMoney}}</text>
      </block>
      <view class="right-scissors"></view>
    </view>

    <view wx:if="{{checkoutCard}}" class="btn" bindtap="nowPay">确认付款</view>
  </view>
</view>

<!-- 选择卡 -->
<view class="mask" style="{{selectCardDisplay}}" bindtap="closeSelectCard"></view>
<view class="select-card" style="{{selectCardDisplay}}">
  <view class="select-title flex-wrp">
    <view class="recharge" data-url="/pages/component/pages/recharge-amount/recharge-amount?cardno={{selectCard.CardNo}}&shopno={{selectCard.ShopNo}}&jumpback=1" bindtap="jumpurl">充值</view>
    <view class="balance">余额：{{selectCard.Balance}}</view>
    <view class="carry" bindtap="carry">确定</view>
  </view>

  <picker-view indicator-style="height: 134px;" style="width: 100%; height: 596rpx;" class="picker-view" bindchange="bindChange">
    <picker-view-column>
      <image wx:for="{{cardType}}" src="{{!item.PicUrl ? cardPicUrl : item.PicUrl}}" class="pay-cardimg"></image>
    </picker-view-column>
    <view class="card-type">{{selectCard.MembershipTypeName}}</view>
    <view class="card-no">{{selectCard.CardNo}}</view> 
  </picker-view>
</view>